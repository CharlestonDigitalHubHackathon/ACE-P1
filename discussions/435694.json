[
  {
    "Id": "1011583",
    "ThreadId": "435694",
    "Html": "Hi Roger ,\r<br />\n<br />\nYou have done a excellent job in Pivot viewer.\r<br />\n<br />\nI'm currently working on share point 2013.I have already built pivot viewer using your source code and its working fine. \r<br />\nIn grid view ,images are loading perfectly, but there is a small correction in the graph view, images are not aligned in center. I referred to your previous post but i am not able to find out where to do the corrections. I have posted my draw method code below. \r<br />\n<br />\nplease tell me where should i do the changes to bring images in center align. \r<br />\n<br />\n//This is the draw method for your reference\r<br />\n<br />\n Draw: function () \r<br />\n{<br />\n<pre><code>    if (this.destinationVisible) {\n\n        //Determine level\n        var biggest = this.width &gt; this.height ? this.width : this.height;\n        var thisLevel = Math.ceil(Math.log(biggest) / Math.log(2));\n\n        if (thisLevel == Infinity || thisLevel == -Infinity)\n            thisLevel = 0;\n\n        //TODO: Look at caching last image to avoid using _controller\n        //if (thisLevel != _level || _images == null) {\n        this._level = thisLevel;\n        this._images = this._controller.GetImagesAtLevel(this.facetItem.Img, this._level);\n        //}\n    }\n\n    if (this.ImageSource != &quot;&quot;) {\n        var img = new Image();\n        img.src = this.ImageSource;\n        //img.align = this.Center;\n        //var test = ((this.width-img.width) / 2);\n        //img.offsetLeft = test;\n        //img.offsetTop = test;\n        //img.align = center;\n        //this.context.clearRect(0, 0, this.width, this.height)\n        this.context.drawImage(img, this.x + 2, this.y + 2, this.width, this.height);\n        //this.context.drawImage(img, this.x + 2, 200)\n    }\n    else {\n        this.DrawEmpty();\n    }\n\n    if (this._selected) {\n        //draw a blue border\n        this.context.beginPath();\n        this.context.rect(this.x + 2, this.y + 2, this.width, this.height);\n        this.context.lineWidth = 3;\n        this.context.strokeStyle = &quot;#92C4E1&quot;;\n        this.context.stroke();\n    }\n},\n//http://simonsarris.com/blog/510-making-html5-canvas-useful\nContains: function (mx, my)\n{\n    return (this.x &lt;= mx) &amp;&amp; (this.x + this.width &gt;= mx) &amp;&amp; (this.y &lt;= my) &amp;&amp; (this.y + this.height &gt;= my);\n},\nDrawEmpty: function () {\n    if (this._controller.DrawLevel == undefined) {\n        //draw an empty square\n        this.context.beginPath();\n        this.context.fillStyle = &quot;#FFFFFF&quot;;\n        this.context.fillRect(this.x + 2, this.y + 2, this.width - 4, this.height - 4);\n        this.context.rect(this.x + 2, this.y + 2, this.width - 4, this.height - 4);\n        this.context.lineWidth = 1;\n        this.context.strokeStyle = &quot;#FFFFFF&quot;;\n    }\n    else {\n\n        //use the controllers blank tile\n        this._controller.DrawLevel(this.facetItem, this.context, this.x + 2, this.y + 2, this.width - 4, this.height - 4);\n    }\n},\nCollectionRoot: &quot;&quot;,\nnow: null,\nend: null,\nx: 0,\ny: 0,\nstartx: 0,\nstarty: 0,\ndestinationx: 0,\ndestinationy: 0,\nwidth: 0,\nheight: 0,\nstartwidth: 0,\nstartheight: 0,\ndestinationwidth: 0,\ndestinationheight: 0,\ndestinationVisible: true,\ncontext: null,\nfacetItem: null,\nSelected: function (selected) { this._selected = selected },\nImageSource: &quot;&quot;\n</code></pre>\n\n});<br />\n",
    "PostedDate": "2013-03-06T23:22:19.947-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "1011637",
    "ThreadId": "435694",
    "Html": "Hi,\r<br />\nYou need to update the drawImage method with the new offsets: this.context.drawImage();\r<br />\nThe context object is an instance of the canvas 2d context. See <a href=\"http://www.w3schools.com/tags/canvas_drawimage.asp\" rel=\"nofollow\">http://www.w3schools.com/tags/canvas_drawimage.asp</a> for more details on the drawImage method.\r<br />\n<br />\nThanks<br />\n",
    "PostedDate": "2013-03-07T02:10:18.883-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]